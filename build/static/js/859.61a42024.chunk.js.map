{"version":3,"file":"static/js/859.61a42024.chunk.js","mappings":"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","sources":["service/AdminService/AdminSettingService.js","pages/Admin/AdminSetting/index.js","service/AdminService/AdminMailService.js"],"sourcesContent":["import axios from \"src/config/axios\";\n\nconst api_path = {\n  getSetting: \"/admin/email/setting\",\n  updateSetting: \"/admin/email/setting\",\n};\n\nconst AdminSettingService = {\n  getSetting: () => {\n    return axios.get(api_path.getSetting);\n  },\n  updateSetting: (params) => {\n    return axios.post(api_path.updateSetting, params);\n  },\n};\n\nexport default AdminSettingService;\n","import React, { forwardRef, useEffect, useState, useRef } from \"react\";\nimport { Card, Row, Col, Form, Input, Button, Tabs, Select, message } from \"antd\";\nimport AdminMailService from \"src/service/AdminService/AdminMailService\";\nimport AdminSettingService from \"src/service/AdminService/AdminSettingService\";\n\nconst { TabPane } = Tabs;\n\nconst ChangePassword = forwardRef((props, ref) => {\n  return (\n    <Form onFinish={props?.passwordSubmit} ref={ref} layout=\"vertical\">\n      <Form.Item label={<h3>Đổi mật khẩu</h3>}>\n        <Form.Item name=\"old_password\">\n          <Input.Password placeholder=\"Mật khẩu hiện tại\" />\n        </Form.Item>\n        <Form.Item name=\"new_password\">\n          <Input.Password placeholder=\"Mật khẩu mới\" />\n        </Form.Item>\n        <Form.Item name=\"confirm_password\">\n          <Input.Password placeholder=\"Xác nhận mật khẩu mới\" />\n        </Form.Item>\n        <Form.Item>\n          <Button htmlType=\"submit\" loading={props?.loading}>\n            Xác nhận\n          </Button>\n        </Form.Item>\n      </Form.Item>\n    </Form>\n  );\n});\n\nconst SettingMail = forwardRef((props, ref) => {\n  \n  useEffect(() => {\n    let { mailRegister, mailPayment } = props?.settingMail;\n    if (mailRegister) {\n      ref.current.setFieldsValue({\n        mailRegister: mailRegister._id,\n      });\n    }\n    if (mailPayment) {\n      ref.current.setFieldsValue({\n        mailPayment: mailPayment._id,\n      });\n    }\n  }, [props]);\n  return (\n    <Form ref={ref} onFinish={props.mailSubmit} layout=\"vertical\">\n      <Form.Item label={\"Mail đăng kí\"} name=\"mailRegister\">\n        <Select>\n          {props.options?.map((item) => (\n            <Select.Option key={item._id} value={item._id}>\n              {item.name}\n            </Select.Option>\n          ))}\n        </Select>\n      </Form.Item>\n      <Form.Item label={\"Mail Thanh Toán\"} name=\"mailPayment\">\n        <Select>\n          {props.options?.map((item) => (\n            <Select.Option key={item._id} value={item._id}>\n              {item.name}\n            </Select.Option>\n          ))}\n        </Select>\n      </Form.Item>\n      <Form.Item>\n        <Button htmlType=\"submit\" loading={props?.loading}>\n          Xác nhận\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n});\n\nconst AdminSetting = () => {\n  const formRef = useRef();\n  const mailRef = useRef();\n  const [loading, setLoading] = useState(false);\n  const [options, setOptions] = useState([]);\n  const [settingMail, setSettingMail] = useState({});\n\n  useEffect(() => {\n    fetchTemplateMail();\n    fetchSetting();\n  }, []);\n\n  const passwordSubmit = (val) => {\n    console.log(val);\n  };\n\n  const mailSubmit = async (val) => {\n    try {\n      setLoading(true);\n      let res = await AdminSettingService.updateSetting({ ...val });\n      message.success(res.data.message);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      fetchSetting();\n    }\n  };\n\n  const fetchTemplateMail = async (page = 1) => {\n    setLoading(true);\n    let params = { page: page };\n    try {\n      let res = await AdminMailService.getTemplate(params);\n      if (res.data.status === 200) {\n        setOptions(res.data.data._template);\n      } else {\n        message.error(res.data.message);\n      }\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchSetting = async () => {\n    try {\n      setLoading(true);\n      let res = await AdminSettingService.getSetting();\n      let { data } = res.data;\n      setSettingMail(data);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const tabList = [\n    {\n      name: \"Đổi mật khẩu\",\n      content: <ChangePassword passwordSubmit={passwordSubmit} ref={formRef} loading={loading} />,\n    },\n    {\n      name: \"Mail\",\n      content: (\n        <SettingMail\n          mailSubmit={mailSubmit}\n          ref={mailRef}\n          options={options}\n          settingMail={settingMail}\n          loading={loading}\n        />\n      ),\n    },\n  ];\n\n  return (\n    <Card title=\"Cài đặt\">\n      <Row gutter={[16, 12]}>\n        <Col span={24}>\n          <Tabs defaultActiveKey=\"1\">\n            {tabList.map((tab) => (\n              <TabPane tab={tab.name} key={tab.name}>\n                {tab.content}\n              </TabPane>\n            ))}\n          </Tabs>\n        </Col>\n      </Row>\n    </Card>\n  );\n};\n\nexport default AdminSetting;\n","import axios from \"src/config/axios\";\n\nconst api_path = {\n  getTemplate: \"/admin/template\",\n  deleteTemplate: \"/admin/template/delete\",\n  addTemplate: \"/admin/template\",\n  editTemplate: \"/admin/template/edit\",\n};\n\nconst AdminMailService = {\n  getTemplate: (params) => {\n    return axios.get(api_path.getTemplate, { params });\n  },\n  addTemplate: (params) => {\n    return axios.post(api_path.addTemplate, params);\n  },\n  editTemplate: (params) => {\n    return axios.post(`${api_path.editTemplate}/${params._id}`, params);\n  },\n  deleteTemplate: (id) => {\n    return axios.post(`${api_path.deleteTemplate}/${id}`);\n  },\n};\n\nexport default AdminMailService;\n"],"names":["api_path","getSetting","axios","updateSetting","params","TabPane","Tabs","ChangePassword","forwardRef","props","ref","onFinish","passwordSubmit","layout","label","name","placeholder","htmlType","loading","SettingMail","useEffect","settingMail","mailRegister","mailPayment","current","setFieldsValue","_id","mailSubmit","options","map","item","value","formRef","useRef","mailRef","useState","setLoading","setOptions","setSettingMail","fetchTemplateMail","fetchSetting","val","AdminSettingService","res","message","data","console","log","page","AdminMailService","status","_template","tabList","content","title","gutter","span","defaultActiveKey","tab","getTemplate","addTemplate","editTemplate","deleteTemplate","id"],"sourceRoot":""}