{"version":3,"file":"static/js/859.61a42024.chunk.js","mappings":"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","sources":["service/AdminService/AdminSettingService.js","pages/Admin/AdminSetting/index.js","service/AdminService/AdminMailService.js"],"sourcesContent":["import axios from \"src/config/axios\";\r\n\r\nconst api_path = {\r\n  getSetting: \"/admin/email/setting\",\r\n  updateSetting: \"/admin/email/setting\",\r\n};\r\n\r\nconst AdminSettingService = {\r\n  getSetting: () => {\r\n    return axios.get(api_path.getSetting);\r\n  },\r\n  updateSetting: (params) => {\r\n    return axios.post(api_path.updateSetting, params);\r\n  },\r\n};\r\n\r\nexport default AdminSettingService;\r\n","import React, { forwardRef, useEffect, useState, useRef } from \"react\";\r\nimport { Card, Row, Col, Form, Input, Button, Tabs, Select, message } from \"antd\";\r\nimport AdminMailService from \"src/service/AdminService/AdminMailService\";\r\nimport AdminSettingService from \"src/service/AdminService/AdminSettingService\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst ChangePassword = forwardRef((props, ref) => {\r\n  return (\r\n    <Form onFinish={props?.passwordSubmit} ref={ref} layout=\"vertical\">\r\n      <Form.Item label={<h3>Đổi mật khẩu</h3>}>\r\n        <Form.Item name=\"old_password\">\r\n          <Input.Password placeholder=\"Mật khẩu hiện tại\" />\r\n        </Form.Item>\r\n        <Form.Item name=\"new_password\">\r\n          <Input.Password placeholder=\"Mật khẩu mới\" />\r\n        </Form.Item>\r\n        <Form.Item name=\"confirm_password\">\r\n          <Input.Password placeholder=\"Xác nhận mật khẩu mới\" />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button htmlType=\"submit\" loading={props?.loading}>\r\n            Xác nhận\r\n          </Button>\r\n        </Form.Item>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n});\r\n\r\nconst SettingMail = forwardRef((props, ref) => {\r\n  \r\n  useEffect(() => {\r\n    let { mailRegister, mailPayment } = props?.settingMail;\r\n    if (mailRegister) {\r\n      ref.current.setFieldsValue({\r\n        mailRegister: mailRegister._id,\r\n      });\r\n    }\r\n    if (mailPayment) {\r\n      ref.current.setFieldsValue({\r\n        mailPayment: mailPayment._id,\r\n      });\r\n    }\r\n  }, [props]);\r\n  return (\r\n    <Form ref={ref} onFinish={props.mailSubmit} layout=\"vertical\">\r\n      <Form.Item label={\"Mail đăng kí\"} name=\"mailRegister\">\r\n        <Select>\r\n          {props.options?.map((item) => (\r\n            <Select.Option key={item._id} value={item._id}>\r\n              {item.name}\r\n            </Select.Option>\r\n          ))}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label={\"Mail Thanh Toán\"} name=\"mailPayment\">\r\n        <Select>\r\n          {props.options?.map((item) => (\r\n            <Select.Option key={item._id} value={item._id}>\r\n              {item.name}\r\n            </Select.Option>\r\n          ))}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <Button htmlType=\"submit\" loading={props?.loading}>\r\n          Xác nhận\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n});\r\n\r\nconst AdminSetting = () => {\r\n  const formRef = useRef();\r\n  const mailRef = useRef();\r\n  const [loading, setLoading] = useState(false);\r\n  const [options, setOptions] = useState([]);\r\n  const [settingMail, setSettingMail] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetchTemplateMail();\r\n    fetchSetting();\r\n  }, []);\r\n\r\n  const passwordSubmit = (val) => {\r\n    console.log(val);\r\n  };\r\n\r\n  const mailSubmit = async (val) => {\r\n    try {\r\n      setLoading(true);\r\n      let res = await AdminSettingService.updateSetting({ ...val });\r\n      message.success(res.data.message);\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      fetchSetting();\r\n    }\r\n  };\r\n\r\n  const fetchTemplateMail = async (page = 1) => {\r\n    setLoading(true);\r\n    let params = { page: page };\r\n    try {\r\n      let res = await AdminMailService.getTemplate(params);\r\n      if (res.data.status === 200) {\r\n        setOptions(res.data.data._template);\r\n      } else {\r\n        message.error(res.data.message);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchSetting = async () => {\r\n    try {\r\n      setLoading(true);\r\n      let res = await AdminSettingService.getSetting();\r\n      let { data } = res.data;\r\n      setSettingMail(data);\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const tabList = [\r\n    {\r\n      name: \"Đổi mật khẩu\",\r\n      content: <ChangePassword passwordSubmit={passwordSubmit} ref={formRef} loading={loading} />,\r\n    },\r\n    {\r\n      name: \"Mail\",\r\n      content: (\r\n        <SettingMail\r\n          mailSubmit={mailSubmit}\r\n          ref={mailRef}\r\n          options={options}\r\n          settingMail={settingMail}\r\n          loading={loading}\r\n        />\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Card title=\"Cài đặt\">\r\n      <Row gutter={[16, 12]}>\r\n        <Col span={24}>\r\n          <Tabs defaultActiveKey=\"1\">\r\n            {tabList.map((tab) => (\r\n              <TabPane tab={tab.name} key={tab.name}>\r\n                {tab.content}\r\n              </TabPane>\r\n            ))}\r\n          </Tabs>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default AdminSetting;\r\n","import axios from \"src/config/axios\";\r\n\r\nconst api_path = {\r\n  getTemplate: \"/admin/template\",\r\n  deleteTemplate: \"/admin/template/delete\",\r\n  addTemplate: \"/admin/template\",\r\n  editTemplate: \"/admin/template/edit\",\r\n};\r\n\r\nconst AdminMailService = {\r\n  getTemplate: (params) => {\r\n    return axios.get(api_path.getTemplate, { params });\r\n  },\r\n  addTemplate: (params) => {\r\n    return axios.post(api_path.addTemplate, params);\r\n  },\r\n  editTemplate: (params) => {\r\n    return axios.post(`${api_path.editTemplate}/${params._id}`, params);\r\n  },\r\n  deleteTemplate: (id) => {\r\n    return axios.post(`${api_path.deleteTemplate}/${id}`);\r\n  },\r\n};\r\n\r\nexport default AdminMailService;\r\n"],"names":["api_path","getSetting","axios","updateSetting","params","TabPane","Tabs","ChangePassword","forwardRef","props","ref","onFinish","passwordSubmit","layout","label","name","placeholder","htmlType","loading","SettingMail","useEffect","settingMail","mailRegister","mailPayment","current","setFieldsValue","_id","mailSubmit","options","map","item","value","formRef","useRef","mailRef","useState","setLoading","setOptions","setSettingMail","fetchTemplateMail","fetchSetting","val","AdminSettingService","res","message","data","console","log","page","AdminMailService","status","_template","tabList","content","title","gutter","span","defaultActiveKey","tab","getTemplate","addTemplate","editTemplate","deleteTemplate","id"],"sourceRoot":""}